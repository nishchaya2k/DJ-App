import{r as u,j as e,u as M,s as T,d as D,S as R,R as P,e as E,c as A}from"./index-C1wee9fv.js";const q="/assets/cartoon.svg",$="/assets/clock.svg",k=({name:o,id:c,timestamp:g,timer:y,setTimeOut:i})=>{const N=new Date(g);let x=new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(N);const l=parseInt("3")*60,f=new Date(g).getTime()/1e3,m=Math.floor(Date.now()/1e3)-f,j=Math.max(l-m,0),[h,d]=u.useState(j);u.useEffect(()=>{const t=()=>{const a=Math.floor(Date.now()/1e3),r=f+l,s=Math.max(r-a,0);return s===0&&i(!0),s},n=setInterval(()=>{d(t())},1e3);return d(t()),()=>clearInterval(n)},[]);const p=t=>{const n=Math.floor(t/60),r=(t%60).toFixed(0).padStart(2,"0");return`${n.toString().padStart(2,"0")}:${r}`};return e.jsxs("div",{className:"w-full flex justify-between items-end text-[#A2A3A4] text-[9px] leading-tight tracking-wide",children:[e.jsxs("div",{className:"flex justify-center items-center gap-[1.5px] font-NeueMontreal font-semibold ",children:[e.jsx("img",{src:$,className:"aspect-square h-[10px] font-NeueMontreal font-semibold"}),e.jsxs("div",{className:"leading-none",children:[y?p(h):x," "]})]}),e.jsxs("div",{className:"w-[120px] flex flex-col items-end justify-center",children:[e.jsxs("div",{className:"w-full text-start truncate font-NeueMontreal font-semibold",children:["Request Id: ",c]}),e.jsxs("div",{className:"w-full text-start truncate font-NeueMontreal font-semibold",children:["Request from: ",o]})]})]})},L="/assets/play.svg",B=({heading:o,title:c,channelName:g,bidAmount:y,id:i,thumbnails:N,name:x,timestamp:l,videoId:f,fetchPendingPlaylist:w,fetchReadyPlaylist:m})=>{const[j,h]=u.useState(!1);let d;switch(o){case"Pending Request":d=e.jsx(k,{name:x,id:i,timestamp:l,timer:!0,setTimeOut:h});break;case"Ready to Play":d=e.jsx(k,{name:x,id:i,timestamp:l,timer:!1,setTimeOut:h});break;default:d=e.jsx(k,{name:x,id:i,timestamp:l,timer:!1,setTimeOut:h})}const p=async()=>{try{const s=await fetch("https://dev.tipzyapp.com/api/artist/v1/playedAction",{method:"POST",headers:{"x-api-key":"J2eswnjKgBaJ9cNSNvVSA392DPbxu1y9aCtaui4Q",Authorization:a},body:JSON.stringify({bidId:i,action:!0})});if(!s.ok){const v=await s.json();throw console.error("Failed to update bid played status"),new Error(`Error ${s.status}: ${v.message}`)}m()}catch(s){console.error(s)}},n=(s=>s.maxres&&s.maxres.url?s.maxres:s.standard&&s.standard.url?s.standard:s.high&&s.high.url?s.high:s.medium&&s.medium.url?s.medium:s.default)(N),a=M(T),r=async(s,v)=>{try{const b=await fetch("https://dev.tipzyapp.com/api/artist/v1/bidAction",{method:"POST",headers:{"x-api-key":"J2eswnjKgBaJ9cNSNvVSA392DPbxu1y9aCtaui4Q",Authorization:a},body:JSON.stringify({bidId:v,action:s})});if(!b.ok){const F=await b.json();throw console.error("Error response data:",F),new Error(`Error ${b.status}: ${F.message}`)}s&&(w(),m())}catch(S){console.error(S)}};return u.useEffect(()=>{j&&o==="Pending Request"&&r(!1,i)},[j]),e.jsx("div",{children:e.jsxs("div",{className:"w-[208px] h-[300px] rounded-3xl overflow-hidden hover:scale-[0.97] transition-all duration-500 ease-in-out",children:[e.jsx("div",{className:`w-full h-1/2 ${o==="Ready to Play"?"cursor-pointer":""}`,onClick:()=>{o==="Ready to Play"&&(window.open(`https://www.youtube.com/watch?v=${f}`,"_blank"),setTimeout(()=>{p()},1e3))},children:e.jsx("img",{src:n==null?void 0:n.url,className:"w-full h-full"})}),e.jsxs("div",{className:"w-full h-1/2 px-[6px] flex flex-col justify-evenly  bg-[#3F444E] tracking-normal ",children:[e.jsxs("div",{className:" h-max flex justify-between items-center",children:[e.jsxs("div",{className:"w-32 text-white",children:[e.jsx("div",{className:"w-full text-sm leading-tight font-NeueMontreal-Med truncate tracking-wide",children:c})," ",e.jsxs("div",{className:"w-full text-[#A2A3A4] text-[10px] leading-tight font-NeueMontreal font-semibold tracking-wide truncate",children:[g," "]})]}),e.jsx("div",{className:"w-7 h-7  bg-[#A9F000] rounded-lg",children:e.jsx("img",{src:q,className:""})})]}),e.jsxs("div",{className:" h-max flex justify-between items-center  tracking-normal",children:[" ",e.jsx("div",{className:"text-[#A2A3A4] text-[10px] leading-tight font-NeueMontreal font-semibold tracking-wide",children:"Bidding Price"}),e.jsxs("div",{className:"w-30 text-lg text-white font-bold flex justify-center items-center gap-1 truncate font-NeueMontreal-Bold",children:[e.jsx("img",{src:D,className:"w-4 h-4"}),"â‚¹",y/100]})]}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full",children:d}),o==="Ready to Play"&&e.jsxs("button",{className:"w-full py-2 flex justify-center items-center gap-2 text-xs text-white rounded-3xl bg-[#019107] font-NeueMontreal font-semibold tracking-wide",onClick:()=>{window.open(`https://www.youtube.com/watch?v=${f}`,"_blank"),setTimeout(()=>{p()},1e3)},children:[e.jsx("img",{src:L}),"Ready to Play"]}),o==="Pending Request"&&e.jsxs("div",{className:"w-full py-1 flex justify-center items-center gap-2 bg-white rounded-3xl",children:[e.jsx("button",{className:"w-[45%] py-0.5 text-xs text-black rounded-3xl bg-[#DDD7FF] font-NeueMontreal font-semibold tracking-wide",onClick:()=>r(!1,i),children:"Reject"}),e.jsx("button",{className:"w-[45%] py-0.5 text-xs text-white rounded-3xl bg-[#5C42FF] font-NeueMontreal font-semibold tracking-wide",onClick:()=>r(!0,i),children:"Accept"})]})]})]})]})})},C=[{value:"newest",label:"Newest"},{value:"lowest",label:"Lowest"},{value:"highest",label:"Highest"}],J=({heading:o,displayList:c,setPageSize:g,totalCount:y,fetchPendingPlaylist:i,fetchReadyPlaylist:N})=>{const[x]=C,[l,f]=u.useState(x),w=u.useRef(null),[m,j]=u.useState(c),h=t=>{f(t)},d=()=>{let t=[...c];switch(l==null?void 0:l.value){case"newest":t.sort((n,a)=>new Date(a.timestamp)-new Date(n.timestamp));break;case"lowest":t.sort((n,a)=>n.bidAmount-a.bidAmount);break;case"highest":t.sort((n,a)=>a.bidAmount-n.bidAmount);break}return t};u.useEffect(()=>{const t=d();j(t)},[l,c]);const p=t=>{if(!w.current)return;const n=w.current;t==="right"&&g(r=>r<y?r+1:r);const a=t==="left"?n.scrollLeft-(n.offsetWidth+20):n.scrollLeft+(n.offsetWidth+20);n==null||n.scrollTo({left:a,behavior:"smooth"})};return u.useEffect(()=>{const t=setTimeout(()=>{i()},5e3);return()=>clearTimeout(t)}),e.jsx("div",{className:"w-full h-full  flex justify-center",children:e.jsx("div",{className:"w-[96%]",children:e.jsxs("div",{className:"flex flex-col justify-between text-white text-lg tracking-wider gap-3  ",children:[e.jsxs("div",{className:"leading-none tracking-wide flex justify-between items-center mx-0.5 font-NeueMontreal font-semibold",children:[e.jsx("span",{className:"text-[18px] font-NeueMontreal font-semibold tracking-wide",children:o}),e.jsxs("div",{className:"flex items-end",children:[e.jsxs("div",{className:"w-[100px] h-full",children:[" ",e.jsx(R,{name:"sortby",value:l,defaultValue:x,options:C,onChange:h,isClearable:!1,maxMenuHeight:100,className:"react-select-container sortbyDD ",classNamePrefix:"react-select",styles:{control:t=>({...t,width:"80px",minHeight:"unset",height:"25px",display:"flex",alignItems:"start",justifyContent:"center",backgroundColor:"#FFFFFF1A",borderColor:"#959799",borderRadius:"8px",overflow:"hidden",outline:"none",padding:"0px",margin:"0",boxShadow:"none","&:hover":{borderColor:"#95979980"}}),valueContainer:t=>({...t,padding:"0px",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"max-content",margin:"0px"}),input:t=>({...t,display:"none"}),singleValue:t=>({...t,fontFamily:"NeueMontreal",color:"#FFFFFF",fontSize:"11px",margin:"0px",padding:"0px",display:"flex",justifyContent:"center",alignItems:"center"}),menu:t=>({...t,margin:"4px 0px 0px 0px",width:"82px",backgroundColor:"#1A1C1E"}),menuList:t=>({...t,padding:"0px",backgroundColor:"#FFFFFF1A",borderRadius:"4px"}),option:()=>({display:"flex",justifyContent:"start",alignItems:"center",gap:"2px",padding:"8px 12px",cursor:"pointer",fontSize:"12px",backgroundColor:"#FFFFFF1A",fontFamily:"NeueMontreal",fontWeight:"800",letterSpacing:"0.1px"}),indicatorsContainer:t=>({...t,width:"25%",display:"flex",justifyContent:"start",alignItems:"start"}),dropdownIndicator:t=>({...t,margin:"0px 0px 60px 0px",padding:"0px",svg:{width:"12px",height:"20px",marginTop:"1px",cursor:"pointer"}}),indicatorSeparator:()=>({display:"none"})}})]}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("div",{className:"text-[#959799] px-1 py-0.5 flex justify-center items-center bg-[#1A1C1E] rounded-lg border border-[#959799] cursor-pointer hover:bg-[#95979980]",onClick:()=>p("left"),children:e.jsx(P,{})}),e.jsx("div",{className:"text-[#959799] px-1 py-0.5 flex justify-center items-center  rounded-lg border border-[#959799] cursor-pointer hover:bg-[#95979980]",onClick:()=>p("right"),children:e.jsx(E,{})})]})]})]}),e.jsxs("div",{className:"min-h-60 flex gap-4 overflow-x-auto",ref:w,children:[c.length===0&&o==="Ready to Play"?e.jsxs("div",{className:"h-[calc(100vh-30.5rem)] w-full flex flex-col  justify-center items-center text-white text-xl font-NeueMontreal",children:[e.jsx("img",{src:A,className:"aspect-square h-24"}),e.jsx("div",{className:"text-[1rem] tracking-wide font-NeueMontreal",children:"No Song Is Ready To Play!"})]}):null,c.length===0&&o==="Pending Request"?e.jsxs("div",{className:"h-[calc(100vh-30.5rem)] w-full flex flex-col justify-center items-center text-white text-xl font-NeueMontreal",children:[e.jsx("img",{src:A,className:"aspect-square h-24"}),e.jsx("div",{className:"text-[1rem] tracking-wide font-NeueMontreal",children:"No Pending Bids!"})]}):null,m==null?void 0:m.map(t=>{var n,a,r,s;return e.jsx(B,{heading:o,title:t.musicDetails.title,channelName:t.musicDetails.channelName,bidAmount:t.bidAmount,id:t.id,thumbnails:(n=t.musicDetails)==null?void 0:n.thumbnails,name:typeof((a=t==null?void 0:t.userData)==null?void 0:a.name)=="string"?(r=t==null?void 0:t.userData)==null?void 0:r.name:"",timestamp:t.timestamp,videoId:(s=t.musicDetails)==null?void 0:s.videoId,fetchPendingPlaylist:i,fetchReadyPlaylist:N},t.id)})]})]})})})};export{J as default};
