import{u as S,s as F,j as t,r as c,a as B,b as P,D as $,c as C}from"./index-C1wee9fv.js";const q="/assets/playButton.svg",L=({heading:u,title:h,channelName:N,bidAmount:j,id:a,thumbnails:v,name:r,videoId:f,fetchPendingPlaylist:g,fetchReadyPlaylist:x})=>{const w=S(F),p=(n=>n.maxres&&n.maxres.url?n.maxres:n.standard&&n.standard.url?n.standard:n.high&&n.high.url?n.high:n.medium&&n.medium.url?n.medium:n.default)(v),l=async()=>{try{const n=await fetch("https://dev.tipzyapp.com/api/artist/v1/playedAction",{method:"POST",headers:{"x-api-key":"J2eswnjKgBaJ9cNSNvVSA392DPbxu1y9aCtaui4Q",Authorization:w},body:JSON.stringify({bidId:a,action:!0})});if(!n.ok){const d=await n.json();throw console.error("Failed to update bid played status"),new Error(`Error ${n.status}: ${d.message}`)}x()}catch(n){console.error(n)}},y=async(n,d)=>{try{const i=await fetch("https://dev.tipzyapp.com/api/artist/v1/bidAction",{method:"POST",headers:{"x-api-key":"J2eswnjKgBaJ9cNSNvVSA392DPbxu1y9aCtaui4Q",Authorization:w},body:JSON.stringify({bidId:d,action:n})});if(!i.ok){const m=await i.json();throw console.error("Error response data:",m),new Error(`Error ${i.status}: ${m.message}`)}n&&(g(),x())}catch(b){console.error(b)}};return t.jsx("div",{className:"w-full h-24 border-[0.5px] border-[#4C4C4C] shadow-2x rounded-xl cursor-pointer box-border",children:t.jsxs("div",{className:"w-full h-full pr-[6px] pl-[10px] pt-[10px] flex items-start justify-between rounded-lg",children:[t.jsxs("div",{className:"w-max h-full flex gap-2",children:[t.jsx("div",{className:"w-[55px] h-[55px] box-content flex justify-center items-center",style:{borderWidth:"3px",borderRadius:"100%",borderColor:"transparent",backgroundImage:"radial-gradient(circle at center, #8673FD 11.35%, #5C42FF 86.53%)",borderImageSlice:"1"},onClick:()=>{u==="Ready to play"&&(window.open(`https://www.youtube.com/watch?v=${f}`,"_blank"),setTimeout(()=>{l()},1e3))},children:t.jsx("div",{className:"w-full h-full rounded-full",style:{backgroundImage:`url(${p==null?void 0:p.url})`,backgroundSize:"cover",backgroundPosition:"center"}})}),t.jsxs("div",{className:"min-w-max h-full pt-[6px] text-white flex flex-col justify-start items-start",children:[t.jsx("div",{className:"w-[140px] text-[15px] font-NeueMontreal-Bold tracking-wide leading-[15px] truncate",children:h}),t.jsx("div",{className:"w-[110px] py-[6px] text-[#828282] text-[11px] leading-[13px] truncate font-NeueMontreal-Med tracking-wide",children:N}),t.jsxs("div",{className:"w-[110px] text-[#A2A3A4] text-[8px] font-NeueMontreal-Med tracking-wide leading-[10px] truncate",children:["Request Id: ",a]}),t.jsxs("div",{className:"w-[110px] pt-[4px] text-[#A2A3A4] text-[8px] font-NeueMontreal-Med tracking-wide leading-[10px] truncate",children:["Request From: ",r]})]})]}),t.jsxs("div",{className:"h-full pt-[6px] flex flex-col justify-start items-end gap-4",children:[t.jsxs("div",{className:"text-transparent bg-gradient-to-r from-[#907EFB] to-[#6E57FF] bg-clip-text text-[21px] font-bold leading-[26px] font-NeueMontreal-Bold tracking-wide",children:["â‚¹",j/100]}),u==="Ready to play"?t.jsxs("button",{className:"w-[90px]  h-[25px] px-2 py-2 flex justify-around items-center text-[8px] text-white rounded-3xl bg-[#019107] font-NeueMontreal font-semibold tracking-wide leading-[10px]",onClick:()=>{window.open(`https://www.youtube.com/watch?v=${f}`,"_blank"),setTimeout(()=>{l()},1e3)},children:[t.jsx("img",{src:q}),"Ready To Play"]}):t.jsxs("div",{className:"w-[105px] py-1 flex justify-center items-center gap-1 bg-white rounded-3xl",children:[t.jsx("button",{className:"w-[45%] py-0.5 text-[10px] text-black rounded-3xl bg-[#DDD7FF] font-NeueMontreal font-semibold tracking-wide",onClick:()=>y(!1,a),children:"Reject"}),t.jsx("button",{className:"w-[45%] py-0.5 text-[10px] text-white rounded-3xl bg-[#5C42FF] font-NeueMontreal font-semibold tracking-wide",onClick:()=>y(!0,a),children:"Accept"})]})]})]})})},z="/assets/dropdown.svg",E=[{value:"newest",label:"Newest"},{value:"lowest",label:"Lowest"},{value:"highest",label:"Highest"}],O=({displayReadyList:u,displayPendingList:h,setReadyPageSize:N,setPendingPageSize:j,fetchPendingPlaylist:a,fetchReadyPlaylist:v})=>{const[r,f]=c.useState("Ready to play"),g=S(B),x=S(P),[w,k]=c.useState(null),[p]=E,[l,y]=c.useState(p),[n,d]=c.useState(),b=e=>{y(e)},T=e=>{f(e.target.value)},i=r==="Ready to play"?u:h,m=async()=>{try{document.documentElement.scrollTop+window.innerHeight+10>=document.documentElement.scrollHeight&&(w||(r==="Ready to play"?N(e=>{if(e>=g)return e;{const s=g-e,o=Math.min(s,5);return e+o}}):j(e=>{if(e>=x)return e;{const s=x-e,o=Math.min(s,5);return e+o}}),k(setTimeout(()=>{k(null)},800))))}catch(e){console.error(e)}},R=()=>{let e=[...i];switch(l==null?void 0:l.value){case"newest":e.sort((s,o)=>new Date(o.timestamp)-new Date(s.timestamp));break;case"lowest":e.sort((s,o)=>s.bidAmount-o.bidAmount);break;case"highest":e.sort((s,o)=>o.bidAmount-s.bidAmount);break}return e};return c.useEffect(()=>{d(i);const e=R();d(e)},[l,i]),c.useEffect(()=>(window.addEventListener("scroll",m),()=>window.removeEventListener("scroll",m))),c.useEffect(()=>{if(r==="Pending Request"){const e=setTimeout(()=>{a()},5e3);return()=>clearTimeout(e)}else{const e=setTimeout(()=>{a()},8e3);return()=>clearTimeout(e)}}),t.jsxs("div",{className:"my-[80px] w-full h-full flex flex-col gap-4 overflow-y-scroll overscroll-contain scroll-smooth",children:[t.jsxs("div",{className:" flex justify-between items-center w-full h-[6%] mt-4",children:[t.jsx("div",{children:t.jsxs("select",{name:"",id:"",value:r,onChange:T,style:{outline:"none",appearance:"none",backgroundColor:"black",color:"white",fontFamily:"NeueMontreal-Med",cursor:"pointer",fontSize:"18px",backgroundImage:`url(${z})`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0px center",backgroundSize:"12px",minWidth:"155px"},children:[t.jsx("option",{children:"Ready to play"}),t.jsx("option",{children:"Pending Request"})]})}),t.jsx($,{sortbyStatus:E,sortby:l,handleChange:b})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[u.length===0&&r==="Ready to play"?t.jsxs("div",{className:"h-[calc(100vh-13rem)]  w-full flex flex-col  justify-center items-center text-white text-xl font-NeueMontreal",children:[t.jsx("img",{src:C,className:"aspect-square h-24"}),t.jsx("div",{className:"text-[1rem] tracking-wide font-NeueMontreal",children:"No Song Is Ready To Play!"})]}):null,h.length===0&&r==="Pending Request"?t.jsxs("div",{className:"h-[calc(100vh-13rem)] w-full flex flex-col  justify-center items-center text-white text-xl font-NeueMontreal",children:[t.jsx("img",{src:C,className:"aspect-square h-24"}),t.jsx("div",{className:"text-[1rem] tracking-wide font-NeueMontreal",children:"No Pending Bids!"})]}):null,n==null?void 0:n.map(e=>{var s,o,M,A,D;return t.jsx(L,{heading:r,title:(s=e.musicDetails)==null?void 0:s.title,channelName:(o=e.musicDetails)==null?void 0:o.channelName,bidAmount:e.bidAmount,id:e.id,thumbnails:(M=e.musicDetails)==null?void 0:M.thumbnails,name:typeof((A=e==null?void 0:e.userData)==null?void 0:A.name)=="string"?(D=e==null?void 0:e.userData)==null?void 0:D.name:"",videoId:e.musicDetails.videoId,fetchPendingPlaylist:a,fetchReadyPlaylist:v},e.id)})]})]})};export{O as default};
